{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/readOnlyError.js","webpack:///./docs/pages/mapswitch.vue?4d7c","webpack:///./docs/pages/mapswitch.vue?1378","webpack:///docs/components/fabric-building-map-vue/index.vue","webpack:///./docs/components/fabric-building-map-vue/index.vue?9f8c","webpack:///./docs/components/fabric-building-map-vue/index.vue","webpack:///./docs/components/fabric-building-map-vue/index.vue?8cff","webpack:///docs/pages/mapswitch.vue","webpack:///./docs/pages/mapswitch.vue?3e0b","webpack:///./docs/pages/mapswitch.vue"],"names":["module","exports","name","Error","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_3_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_3_oneOf_1_2_node_modules_vue_loader_lib_index_js_vue_loader_options_mapswitch_vue_vue_type_style_index_0_id_fa7c49b6_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","n","TYPE_ENUM","getItemFromTreeById","tree","id","res","travalNode","node","children","length","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","item","value","err","return","components_fabric_building_map_vuevue_type_script_lang_js_","components","props","buildData","type","Object","default","required","data","historyMaps","historyCount","computed","mapData","this","floorList","parent","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","filter","mounted","emitValue","methods","handleAreaClick","$emit","handleAreaDbClick","readOnlyError_default","handlePointClick","handlePointDbClick","info","handleFloorClick","floor","handleBackBtnClick","slice","watch","val","component","componentNormalizer","_vm","_h","$createElement","_c","_self","staticClass","attrs","svg-map-url","svgMapUrl","background-color","backgroundColor","point-list","pointList","map-width","mapWidth","map-height","mapHeight","map-unit","mapUnit","heatmapOptions","heatmap-min","heatmapMin","heatmap-max","heatmapMax","heatmap-data","heatmapData","zoom-type","zoomType","max-zoom","maxZoom","min-zoom","minZoom","zoom-rate","zoomRate","click-active-fill-color","clickActiveFillColor","allow-active-area-on-click","allowActiveAreaOnClick","on","pointClick","pointDbClick","areaClick","areaDbClick","_e","_v","click","_l","index","key","class","active","$event","_s","options","__file","components_fabric_building_map_vue","mapswitchvue_type_script_lang_js_TYPE_ENUM","pages_mapswitchvue_type_script_lang_js_","fabricBuildingMapVue","coordX","coordY","url","zoomThreshold","fill","text","fontSize","angle","underline","image","originX","originY","width","height","top","left","mapswitch_component","_m","build-data","model","callback","$$v","expression","__webpack_exports__"],"mappings":"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","file":"01d1d5840947afdfff2d.js","sourcesContent":["function _readOnlyError(name) {\n  throw new Error(\"\\\"\" + name + \"\\\" is read-only\");\n}\n\nmodule.exports = _readOnlyError;","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js??ref--3-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--3-oneOf-1-2!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mapswitch.vue?vue&type=style&index=0&id=fa7c49b6&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js??ref--3-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--3-oneOf-1-2!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mapswitch.vue?vue&type=style&index=0&id=fa7c49b6&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container layout-rl\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"map-wrapper\"},[_c('fabric-building-map-vue',{attrs:{\"build-data\":_vm.buildData},model:{value:(_vm.mapData),callback:function ($$v) {_vm.mapData=$$v},expression:\"mapData\"}})],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"op-wrapper\"},[_c('div',{staticClass:\"section\"},[_c('p',{staticClass:\"tip\"},[_vm._v(\"提示说明\")]),_vm._v(\" \"),_c('ul',[_c('li',[_c('p',[_vm._v(\"双击点位，可以进行svg图切换。\")])])])])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"fm-b-wrapper\">\n    <fabric-map-vue\n        v-if=\"mapData\"\n        :svg-map-url=\"mapData.svgMapUrl\" \n        :background-color=\"mapData.backgroundColor\"\n        :point-list=\"mapData.pointList\"\n        :map-width=\"mapData.mapWidth\"\n        :map-height=\"mapData.mapHeight\"\n        :map-unit=\"mapData.mapUnit\"\n        :heatmapOptions=\"mapData.heatmapOptions\"\n        :heatmap-min=\"mapData.heatmapMin\"\n        :heatmap-max=\"mapData.heatmapMax\"\n        :heatmap-data=\"mapData.heatmapData\"\n        :zoom-type=\"mapData.zoomType\"\n        :max-zoom=\"mapData.maxZoom\"\n        :min-zoom=\"mapData.minZoom\"\n        :zoom-rate=\"mapData.zoomRate\"\n        :click-active-fill-color=\"mapData.clickActiveFillColor\"\n        :allow-active-area-on-click=\"mapData.allowActiveAreaOnClick\"\n        @pointClick=\"handlePointClick\"\n        @pointDbClick=\"handlePointDbClick\"\n        @areaClick=\"handleAreaClick\"\n        @areaDbClick=\"handleAreaDbClick\">\n      </fabric-map-vue>\n    <div class=\"fm-b-back-wrapper\" v-if=\"historyCount > 1\">\n      <i class=\"fm-icon-left-circle fm-b-back-icon\" @click=\"handleBackBtnClick\"></i>\n    </div>\n    <div class=\"fm-b-floor-wrapper\" v-if=\"floorList\">\n      <ul class=\"fm-b-floor-list\">\n        <li class=\"fm-b-floor-item\" \n          v-for=\"(item, index) of floorList\" :key=\"index\" @click=\"handleFloorClick(item)\"\n          :class=\"{active: item === mapData}\">{{item.name}}</li>\n      </ul>\n    </div>  \n  </div>\n</template>\n<script>\nimport './fabric-building-map-vue.css'\n\nconst TYPE_ENUM = {\n  AREA: 1,\n  BUILDING: 2,\n  FLOOR: 3,\n}\n\n// 从树找到ID的节点\nfunction getItemFromTreeById (tree, id) {\n  let res\n  function travalNode (node) {\n    if (node.id === id) return node\n    if (node.children && node.children.length) {\n      for (const item of node.children) {\n        if (item && item.id === id) {\n          res = item\n          return\n        }\n        travalNode(item)\n      }\n    }\n  }\n  travalNode(tree)\n  return res\n}\n\n// 通过引用查询其父亲节点\nfunction getParentFromTreeByRef (tree, data) {\n  let res\n  function travalNode (node) {\n    if (node.children && node.children.length) {\n      for (const item of node.children) {\n        if (item && item === data) {\n          res = node\n          return\n        }\n        travalNode(item)\n      }\n    }\n  }\n  travalNode(tree)\n  return res\n}\n\nexport default {\n  components: {\n  },\n  props: {\n    buildData: {\n      type: Object,\n      default () {\n        return {\n          // id: 1,\n          // type: TYPE_ENUM.AREA,\n          // svgMapUrl: 'https://qiniu.qjzd.net/cf.svg',\n          // pointList: [\n          //   { id: 2, coordX: 0.30141547, coordY: 0.55013478, type: 'img', url: 'http://vve.qiniu.qjzd.net/FlMiBGKRZHyNtFL03ZCWv5ucIlCw' },\n          //   { zoomThreshold: 0.5, id: 2, coordX: 0.6944213, coordY: 0.55121297, type: 'text', fill: 'red', text: '餐饮  店', fontSize: 16, angle: 10, underline: true },\n          //   { coordX: 0.0016652789342214821, coordY: 0.5929919137466307, id: 3}\n          // ],\n          // heatmapData: [{\"coordX\":0.058284762697751874,\"coordY\":0.3706199460916442},{\"coordX\":0.15736885928393005,\"coordY\":0.3706199460916442},{\"coordX\":0.2206494587843464,\"coordY\":0.3706199460916442},{\"coordX\":0.24313072439633637,\"coordY\":0.35983827493261455},{\"coordX\":0.24895920066611157,\"coordY\":0.3490566037735849},{\"coordX\":0.2514571190674438,\"coordY\":0.33153638814016173},{\"coordX\":0.25228975853455454,\"coordY\":0.31805929919137466},{\"coordX\":0.2514571190674438,\"coordY\":0.3086253369272237},{\"coordX\":0.2456286427976686,\"coordY\":0.2991913746630728},{\"coordX\":0.23980016652789343,\"coordY\":0.29784366576819404},{\"coordX\":0.2373022481265612,\"coordY\":0.29649595687331537},{\"coordX\":0.23563696919233973,\"coordY\":0.29649595687331537},{\"coordX\":0.23813488759367193,\"coordY\":0.3005390835579515},{\"coordX\":0.24229808492922564,\"coordY\":0.3059299191374663},{\"coordX\":0.2547876769358868,\"coordY\":0.316711590296496},{\"coordX\":0.2664446294754371,\"coordY\":0.3247978436657682},{\"coordX\":0.27643630308076605,\"coordY\":0.33423180592991913},{\"coordX\":0.28309741881765194,\"coordY\":0.34097035040431267},{\"coordX\":0.28642797668609493,\"coordY\":0.3504043126684636},{\"coordX\":0.28642797668609493,\"coordY\":0.35444743935309975},{\"coordX\":0.28642797668609493,\"coordY\":0.36253369272237196},{\"coordX\":0.28642797668609493,\"coordY\":0.3706199460916442},{\"coordX\":0.28559533721898417,\"coordY\":0.37870619946091644},{\"coordX\":0.28309741881765194,\"coordY\":0.38409703504043125},{\"coordX\":0.28309741881765194,\"coordY\":0.3867924528301887},{\"coordX\":0.2839300582847627,\"coordY\":0.40161725067385445},{\"coordX\":0.29308909242298087,\"coordY\":0.4299191374663073},{\"coordX\":0.31973355537052456,\"coordY\":0.48247978436657685},{\"coordX\":0.3638634471273938,\"coordY\":0.5512129380053908},{\"coordX\":0.42714404662781014,\"coordY\":0.6199460916442049}],\n          // children: [\n          //   {\n          //     id: 2,\n          //     type: TYPE_ENUM.BUILDING,\n          //     children: [{\n          //       id: 3,\n          //       type: TYPE_ENUM.FLOOR,\n          //       name: '1F',\n          //       svgMapUrl: 'https://vve.qiniu.qjzd.net/FjX8v4j87gKoqHLeKTfcRyxxdm7t',\n          //       pointList: [\n          //         { id: 2, coordX: 0.40141547, coordY: 0.55013478, type: 'img', url: 'http://vve.qiniu.qjzd.net/FlMiBGKRZHyNtFL03ZCWv5ucIlCw' },\n          //       ],\n          //       heatmapData: [{\"coordX\":0.58284762697751874,\"coordY\":0.3706199460916442, value: 100 }]\n          //     },\n          //     {\n          //       id: 4,\n          //       type: TYPE_ENUM.FLOOR,\n          //       name: '2F',\n          //       svgMapUrl: 'https://vve.qiniu.qjzd.net/FjX8v4j87gKoqHLeKTfcRyxxdm7t',\n          //       pointList: [\n          //         { id: 2, coordX: 0.40141547, coordY: 0.55013478, type: 'img', url: 'http://vve.qiniu.qjzd.net/FlMiBGKRZHyNtFL03ZCWv5ucIlCw' },\n          //       ],\n          //       heatmapData: [{\"coordX\":0.78284762697751874,\"coordY\":0.3706199460916442, value: 100 }]\n          //     }]\n          //   }\n          // ],\n        }\n      }\n    },\n    value: {\n      type: Object,\n      required: false\n    }\n  },\n  data () {\n    return {\n      historyMaps: [],\n      historyCount: 0\n    }\n  },\n  computed: {\n    mapData () {\n      return this.value\n    },\n    floorList () {\n      if (this.mapData) {\n        const parent = getParentFromTreeByRef(this.buildData, this.mapData)\n        return parent && parent.children.filter(item => item.type === TYPE_ENUM.FLOOR)\n      }\n    }\n  },\n  mounted () {\n    if (!this.mapData) this.emitValue(this.buildData)\n  },\n  methods: {\n    handleAreaClick (data) {\n      this.$emit('areaClick', data, this.mapData)\n    },\n    handleAreaDbClick (data) {\n      this.$emit('areaDbClick', data, this.mapData)\n      if (data.id) {\n        const node = getItemFromTreeById(this.buildData, data.id)\n        if (node && node.type === TYPE_ENUM.BUILDING) {\n          node = node.children[0]\n        }\n        if (node) {\n          this.emitValue(node)\n        }\n      }\n    },\n    handlePointClick (data) {\n      this.$emit('pointClick', data, this.mapData)\n    },\n    handlePointDbClick(data) {\n      this.$emit('pointDbClick', data, this.mapData)\n      if (data.info && data.info.id) {\n        let node = getItemFromTreeById(this.buildData, data.info.id)\n        if (node && node.type === TYPE_ENUM.BUILDING) {\n          node = node.children[0]\n        }\n        if (node) {\n          this.emitValue(node)\n        }\n      }\n    },\n    handleFloorClick (floor) {\n      this.emitValue(floor)\n    },\n    handleBackBtnClick () {\n      if (this.historyCount <= 1) return\n      const mapData = this.historyMaps[this.historyCount - 2]\n      this.historyCount--\n      this.$emit('input', mapData)\n    },\n    emitValue (mapData) {\n      this.$emit('input', mapData)\n      if (this.historyCount < this.historyMaps.length) {\n        this.historyMaps = this.historyMaps.slice(0, this.historyCount)\n      }\n      this.historyMaps[this.historyCount] = mapData\n      this.historyCount++\n    }\n  },\n  watch: {\n    buildData (val) {\n      if (!this.mapData) this.emitValue(this.buildData)\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??ref--2-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=d275d7e0&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"index.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"fm-b-wrapper\"},[(_vm.mapData)?_c('fabric-map-vue',{attrs:{\"svg-map-url\":_vm.mapData.svgMapUrl,\"background-color\":_vm.mapData.backgroundColor,\"point-list\":_vm.mapData.pointList,\"map-width\":_vm.mapData.mapWidth,\"map-height\":_vm.mapData.mapHeight,\"map-unit\":_vm.mapData.mapUnit,\"heatmapOptions\":_vm.mapData.heatmapOptions,\"heatmap-min\":_vm.mapData.heatmapMin,\"heatmap-max\":_vm.mapData.heatmapMax,\"heatmap-data\":_vm.mapData.heatmapData,\"zoom-type\":_vm.mapData.zoomType,\"max-zoom\":_vm.mapData.maxZoom,\"min-zoom\":_vm.mapData.minZoom,\"zoom-rate\":_vm.mapData.zoomRate,\"click-active-fill-color\":_vm.mapData.clickActiveFillColor,\"allow-active-area-on-click\":_vm.mapData.allowActiveAreaOnClick},on:{\"pointClick\":_vm.handlePointClick,\"pointDbClick\":_vm.handlePointDbClick,\"areaClick\":_vm.handleAreaClick,\"areaDbClick\":_vm.handleAreaDbClick}}):_vm._e(),_vm._v(\" \"),(_vm.historyCount > 1)?_c('div',{staticClass:\"fm-b-back-wrapper\"},[_c('i',{staticClass:\"fm-icon-left-circle fm-b-back-icon\",on:{\"click\":_vm.handleBackBtnClick}})]):_vm._e(),_vm._v(\" \"),(_vm.floorList)?_c('div',{staticClass:\"fm-b-floor-wrapper\"},[_c('ul',{staticClass:\"fm-b-floor-list\"},_vm._l((_vm.floorList),function(item,index){return _c('li',{key:index,staticClass:\"fm-b-floor-item\",class:{active: item === _vm.mapData},on:{\"click\":function($event){_vm.handleFloorClick(item)}}},[_vm._v(_vm._s(item.name))])}))]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container layout-rl\">\n    <div class=\"op-wrapper\">\n      <div class=\"section\">\n        <p class=\"tip\">提示说明</p>\n        <ul>\n          <li><p>双击点位，可以进行svg图切换。</p></li>\n        </ul>\n      </div>\n    </div>\n    <div class=\"map-wrapper\">\n      <fabric-building-map-vue :build-data=\"buildData\" v-model=\"mapData\"></fabric-building-map-vue>\n    </div>\n  </div>\n</template>\n\n<script>\nimport fabricBuildingMapVue from '../components/fabric-building-map-vue'\n\nconst TYPE_ENUM = {\n  AREA: 1,\n  BUILDING: 2,\n  FLOOR: 3,\n}\nexport default {\n  components: {\n    fabricBuildingMapVue\n  },\n  data () {\n    return {\n      buildData: {\n        id: 1,\n        type: TYPE_ENUM.AREA,\n        svgMapUrl: 'https://qiniu.qjzd.net/cf.svg',\n        pointList: [\n          { id: 2, coordX: 0.30141547, coordY: 0.55013478, type: 'img', url: 'http://vve.qiniu.qjzd.net/Fgjso-fDXte_VzkvQS2n2d_Fb5uw' },\n          { zoomThreshold: 0.5, id: 2, coordX: 0.6944213, coordY: 0.55121297, type: 'text', fill: 'red', text: '餐饮  店', fontSize: 16, angle: 10, underline: true },\n          { coordX: 0.0016652789342214821, coordY: 0.5929919137466307, id: 3},\n          { \n            id: 123,\n            type: 'imgtext',\n            coordX: 0.2,\n            coordY: 0.2,\n            image: {\n              url: \"http://vve.qiniu.qjzd.net/Fgjso-fDXte_VzkvQS2n2d_Fb5uw\",\n              originX: 'center',\n              originY: 'center',\n              width: 20,\n              height: 23,\n              top: 0,\n              left: 0,\n            },\n            text: {\n              text: '12sdfsdf3',\n              originX: 'center',\n              originY: 'center',\n              top: 25,\n              left: 0,\n              fontSize: 16,\n            },\n          },\n        ],\n        \n        heatmapData: [{\"coordX\":0.058284762697751874,\"coordY\":0.3706199460916442},{\"coordX\":0.15736885928393005,\"coordY\":0.3706199460916442},{\"coordX\":0.2206494587843464,\"coordY\":0.3706199460916442},{\"coordX\":0.24313072439633637,\"coordY\":0.35983827493261455},{\"coordX\":0.24895920066611157,\"coordY\":0.3490566037735849},{\"coordX\":0.2514571190674438,\"coordY\":0.33153638814016173},{\"coordX\":0.25228975853455454,\"coordY\":0.31805929919137466},{\"coordX\":0.2514571190674438,\"coordY\":0.3086253369272237},{\"coordX\":0.2456286427976686,\"coordY\":0.2991913746630728},{\"coordX\":0.23980016652789343,\"coordY\":0.29784366576819404},{\"coordX\":0.2373022481265612,\"coordY\":0.29649595687331537},{\"coordX\":0.23563696919233973,\"coordY\":0.29649595687331537},{\"coordX\":0.23813488759367193,\"coordY\":0.3005390835579515},{\"coordX\":0.24229808492922564,\"coordY\":0.3059299191374663},{\"coordX\":0.2547876769358868,\"coordY\":0.316711590296496},{\"coordX\":0.2664446294754371,\"coordY\":0.3247978436657682},{\"coordX\":0.27643630308076605,\"coordY\":0.33423180592991913},{\"coordX\":0.28309741881765194,\"coordY\":0.34097035040431267},{\"coordX\":0.28642797668609493,\"coordY\":0.3504043126684636},{\"coordX\":0.28642797668609493,\"coordY\":0.35444743935309975},{\"coordX\":0.28642797668609493,\"coordY\":0.36253369272237196},{\"coordX\":0.28642797668609493,\"coordY\":0.3706199460916442},{\"coordX\":0.28559533721898417,\"coordY\":0.37870619946091644},{\"coordX\":0.28309741881765194,\"coordY\":0.38409703504043125},{\"coordX\":0.28309741881765194,\"coordY\":0.3867924528301887},{\"coordX\":0.2839300582847627,\"coordY\":0.40161725067385445},{\"coordX\":0.29308909242298087,\"coordY\":0.4299191374663073},{\"coordX\":0.31973355537052456,\"coordY\":0.48247978436657685},{\"coordX\":0.3638634471273938,\"coordY\":0.5512129380053908},{\"coordX\":0.42714404662781014,\"coordY\":0.6199460916442049}],\n        children: [\n          {\n            id: 2,\n            type: TYPE_ENUM.BUILDING,\n            children: [{\n              id: 3,\n              type: TYPE_ENUM.FLOOR,\n              name: '1F',\n              svgMapUrl: 'https://vve.qiniu.qjzd.net/FjX8v4j87gKoqHLeKTfcRyxxdm7t',\n              pointList: [\n                { id: 2, coordX: 0.40141547, coordY: 0.55013478, type: 'img', url: 'http://vve.qiniu.qjzd.net/FlMiBGKRZHyNtFL03ZCWv5ucIlCw' },\n              ],\n              heatmapData: [{\"coordX\":0.58284762697751874,\"coordY\":0.3706199460916442, value: 100 }]\n            },\n            {\n              id: 4,\n              type: TYPE_ENUM.FLOOR,\n              name: '2F',\n              svgMapUrl: 'https://vve.qiniu.qjzd.net/FjX8v4j87gKoqHLeKTfcRyxxdm7t',\n              pointList: [\n                { id: 2, coordX: 0.40141547, coordY: 0.55013478, type: 'img', url: 'http://vve.qiniu.qjzd.net/FlMiBGKRZHyNtFL03ZCWv5ucIlCw' },\n              ],\n              heatmapData: [{\"coordX\":0.78284762697751874,\"coordY\":0.3706199460916442, value: 100 }]\n            }]\n          }\n        ],\n      },\n      mapData: undefined\n    }\n  },\n}\n</script>\n<style scoped>\n.container,\n.map-wrapper {\n  height: 100%;\n  position: relative;\n}\n</style>\n\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mapswitch.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./mapswitch.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./mapswitch.vue?vue&type=template&id=fa7c49b6&scoped=true&\"\nimport script from \"./mapswitch.vue?vue&type=script&lang=js&\"\nexport * from \"./mapswitch.vue?vue&type=script&lang=js&\"\nimport style0 from \"./mapswitch.vue?vue&type=style&index=0&id=fa7c49b6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fa7c49b6\",\n  null\n  \n)\n\ncomponent.options.__file = \"mapswitch.vue\"\nexport default component.exports"],"sourceRoot":""}